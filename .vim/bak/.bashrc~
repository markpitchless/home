# .bashrc

# User specific aliases and functions

#
#:mandrake
#
# Source global definitions
# I think mandrake apps add profile stuff here eg env var setting,
# so should probably leave it for now.
#
# DISABLED: The file is dodgey and runs commands for all shells that should
# only work for login shells! Moved the code from /etc/bashrc to my
# ~/bash_profile. See there
#
#if [ -f /etc/bashrc ]; then
#	. /etc/bashrc
#fi

# mandrake PS1 hack. PS1 is getting reset by something after my profile has
# run, so this changes it if it is still the value it gets set to.
if [ "$PS1" = "\\s-\\v\\\$ " ]; then 
    #PS1='\033]0;\u@\h:\w \007\[\033[01;35m\]\u@\h \w\n$ \[\033[00m\]'
	#     ^Sets terminal title^^Prompt------------------------------^
	PS1="\033]0;\u@\h:\w \007$(color ltmagenta)\u@\h $(color ltyellow)\w $(color off)\n$ "
	#    ^---Sets terminal title----^                                        ^NB: before \n
fi

#
# TODO Should we be making sure of the umask setting in here?
#

#
# grommits rc
#

#
# bash shell options
#
shopt -s checkwinsize
shopt -s histappend    # Append (not overwrite) to HISTFILE on exit
#shopt -s histverify
shopt -s cmdhist       # Save multi line commands as 1 hist entry
shopt -s lithist       # save multi lines with embedded \n where possible
shopt -s extglob       # Extra globbing ops. See Pattern Matching in bash help

# ls
#
alias ls='ls --color -hF'
alias la='ls -a'
alias l='ls -l'
alias ll='ls -la'
alias lsd='ls -d */'  # list only directories
alias tree='tree -C'

# make sure file commands _dont_ ask
alias cp='cp'
alias rm='rm'
alias mv='mv'
# shorten mkdir and have it make intermediate directories
alias md='mkdir -p'
# human readable dir and disk sizes
alias du='du -h'
alias df='df -h'

# general term stuff
alias bye='exit'
alias cls='clear'
alias hist='history'
alias ghist='history | grep'
alias j='jobs'

# full root login
alias ru='/bin/su - root'
#alias ru='/bin/su - root -c bash' #:www3

# mmmmmmmmmmmmmmmmm, grep :)
alias grep='grep --color'
alias g='grep'
alias rgrep='find | xargs grep' # recursive grep

# vim
alias vr='vim -R'
alias vi='vim'

# Perl
#
#alias newpm='h2xs -A -X -n'
alias perlinc="perl -le 'print join \"\n\", @INC'"
alias pd="perldoc"
alias pf="perldoc -f"

# cvs
#
alias cvsmods='ls "$CVSROOT"'
# List any changes, updates, conficts etc without actually doing anything
# ie check the state of a CVS dir
alias cvschk='cvs -nq update -dP'

# HTML Tidy
alias tidy-xhtml='tidy -i -wrap 120 -asxhtml'
alias tidy-xml='tidy -i -wrap 120 -xml'

#
# SSH
#
# TODO Check SSH_AGENT_PID to see if we need to bother
if [ -f ~/ssh-agent ]; then
    . ~/ssh-agent
fi
