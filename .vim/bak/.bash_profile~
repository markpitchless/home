# .bash_profile

#
# grommits bash startup
#

#
# Mandrake global profile stuff
#
# All the scripts run set mandrake stuff as well as scripts installed from
# mandrake packages that need to set profile stuff.
#
# Call moved to here from /etc/bashrc as this was running them for all
# shells and not just login shells as it claims! Disabled call to /etc/bashrc
# from my .bashrc
#
export IGNORE_SYSTEM_ALIASES=1 # Stop alias.sh doing it thing
echo "Sourcing global profiles from /etc/profile.d/*.sh"
for file in /etc/profile.d/*.sh; do
	if [ -x $file ]; then
		echo $file
		. $file
	fi
done
echo "Global profiles done."
unset USERNAME # Mandrake - ?



#
# User profiles. Usefull for installed apps to set up any env they want.
#==============================================================================

echo "Sourcing user profiles from ~/.profile.d/*.sh"
for file in $HOME/.profile.d/*.sh; do
	if [ -x $file ]; then
		echo $file
		. $file
	fi
done
echo "User profiles done."

#
# TODO Host based profiles
#

# Add my bin 
export PATH="$PATH:$HOME/bin";export PATH

#export EDITOR=/usr/local/bin/vim #:www3
export EDITOR=/bin/vim #:mandrake

#
# promt
#
#if [ "$PS1" ]; then # we are interactive
#	echo "Setting PS1"
	export PS1='\033]0;\u@\h:\w \007\[\033[01;35m\]\u@\h \w\n$\[\033[00m\]'
    #          ^Sets terminal title^^Prompt------------------------------^
#fi

#
# tmp directory - Set to ~/tmp, creating it if its not there
# 
# Code from madrake9 /etc/profile.d/tmpdir.sh  Thanks:)
#
if [ -d ${HOME}/tmp -a -w ${HOME}/tmp ];then
	export TMPDIR=${HOME}/tmp
	export TMP=${HOME}/tmp
	export TEMP=${HOME}/tmp
elif mkdir -p ${HOME}/tmp >/dev/null 2>&1;then
	chmod 700 ${HOME}/tmp
	export TMPDIR=${HOME}/tmp
	export TMP=${HOME}/tmp
	export TEMP=${HOME}/tmp
else
	export TMPDIR=/tmp/
	export TMP=/tmp/
	export TEMP=/tmp/
fi

# MANDRAKE
# Make a filter for less
if [ -x /usr/bin/lesspipe.sh ];then
     export LESSOPEN="|/usr/bin/lesspipe.sh %s"
fi

# MANDRAKE
#eval `dircolors --sh /etc/DIR_COLORS`

#
# SSH
#==============================================================================

# If DISPLAY is also set and no terminal use the following prog to request
# passwords.
export SSH_ASKPASS=/usr/bin/ssh-askpass

# use ssh, not rsh, when using :ext: method in CVSROOT
export CVS_RSH=ssh
export RSYNC_RSH=ssh

# Start the agent and add my keys (will prompt for passwords)
#eval `ssh-agent`
ssh-agent > ~/ssh-agent
#ssh-add


#
# :www3
#==============================================================================
#
# Add GNU tools before suns
#export PATH="/usr/local/bin:$PATH"
#export CVSROOT=/export/home/cvs/cvsroot
#export JAVA_HOME=/usr/java
#export MANPATH=/usr/local/man:/usr/share/man

#
# Get the aliases and functions
# This file is sourced by bash when you log in interactively.
#
[ -f ~/.bashrc ] && . ~/.bashrc
